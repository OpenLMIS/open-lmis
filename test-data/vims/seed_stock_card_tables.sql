DO
$$
BEGIN

INSERT INTO vaccine_order_requisition_master_columns(
            id, name, description, label, indicator, displayorder, mandatory,
            createdby, createddate, modifiedby, modifieddate)

VALUES(1,'Product','Product Name','Product','P',1,TRUE,1,'2015-09-20 00:00:00',1,'2015-09-20 00:00:00'),
(2,'Maximum Stock','Maximum Stock','Maximum Stock','M',2,TRUE,1,'2015-09-20 00:00:00',1,'2015-09-20 00:00:00'),
(3,'Reorder Level','Reorder Level','Reorder Level','R',3,TRUE,1,'2015-09-20 00:00:00',1,'2015-09-20 00:00:00'),
(4,'Stock Available','Stock Available','Stock Available','S',4,TRUE,1,'2015-09-20 00:00:00',1,'2015-09-20 00:00:00'),
(5,'Amount Required','Amount Required','Amount Required','A',5,TRUE,1,'2015-09-20 00:00:00',1,'2015-09-20 00:00:00');


  INSERT INTO lots (productid, lotnumber, manufacturername, manufacturedate, expirationdate)
  VALUES ((SELECT id FROM products WHERE primaryname = 'BCG'),'A1','Manufacturer 1','2015-05-01 00:00:00','2016-05-01 00:00:00')
    ,((SELECT id FROM products WHERE primaryname = 'BCG'),'B1','Manufacturer 2','2015-06-01 00:00:00','2016-06-01 00:00:00')
    ,((SELECT id FROM products WHERE primaryname = 'OPV'),'A2','Manufacturer 1','2015-07-01 00:00:00','2016-07-01 00:00:00')
    ,((SELECT id FROM products WHERE primaryname = 'OPV'),'B2','Manufacturer 2','2015-08-01 00:00:00','2016-08-01 00:00:00')
  ;

  INSERT INTO stock_cards (facilityid, productid, totalquantityonhand, effectivedate, notes)
  VALUES ((SELECT id FROM facilities WHERE name = 'Arusha RVS'),(SELECT id FROM products WHERE primaryname = 'BCG'),550,'2015-08-02 00:00:00','Test stock card for BCG at Arusha RVS')
    ,((SELECT id FROM facilities WHERE name = 'Arusha RVS'),(SELECT id FROM products WHERE primaryname = 'OPV'),750,'2015-08-02 00:00:00','Test stock card for OPV at Arusha RVS')
    ,((SELECT id FROM facilities WHERE name = 'Karatu DVS'),(SELECT id FROM products WHERE primaryname = 'BCG'),110,'2015-08-03 00:00:00','Test stock card for BCG at Karatu DVS')
    ,((SELECT id FROM facilities WHERE name = 'Karatu DVS'),(SELECT id FROM products WHERE primaryname = 'OPV'),90,'2015-08-04 00:00:00','Test stock card for OPV at Karatu DVS')
    ,((SELECT id FROM facilities WHERE name = 'Tanzania CVS'),(SELECT id FROM products WHERE primaryname = 'BCG'),1000,'2015-08-04 00:00:00','Test stock card for BCG at Tanzania CVS')
    ,((SELECT id FROM facilities WHERE name = 'Tanzania CVS'),(SELECT id FROM products WHERE primaryname = 'OPV'),900,'2015-08-04 00:00:00','Test stock card for OPV at Tanzania CVS')
  ;

  INSERT INTO lots_on_hand (stockcardid, lotid, quantityonhand, effectivedate)
  VALUES ((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Arusha RVS'),(SELECT id FROM lots WHERE lotnumber = 'A1'),125,'2015-08-02 00:00:00')
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Arusha RVS'),(SELECT id FROM lots WHERE lotnumber = 'B1'),425,'2015-08-02 00:00:00')
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Arusha RVS'),(SELECT id FROM lots WHERE lotnumber = 'A2'),100,'2015-08-02 00:00:00')
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Arusha RVS'),(SELECT id FROM lots WHERE lotnumber = 'B2'),650,'2015-08-02 00:00:00')
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Karatu DVS'),(SELECT id FROM lots WHERE lotnumber = 'A1'),15,'2015-08-03 00:00:00')
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Karatu DVS'),(SELECT id FROM lots WHERE lotnumber = 'B1'),95,'2015-08-03 00:00:00')
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Karatu DVS'),(SELECT id FROM lots WHERE lotnumber = 'A2'),10,'2015-08-04 00:00:00')
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Karatu DVS'),(SELECT id FROM lots WHERE lotnumber = 'B2'),80,'2015-08-04 00:00:00')
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Tanzania CVS'),(SELECT id FROM lots WHERE lotnumber = 'A1'),500,'2015-08-04 00:00:00')
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Tanzania CVS'),(SELECT id FROM lots WHERE lotnumber = 'B1'),500,'2015-08-04 00:00:00')
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Tanzania CVS'),(SELECT id FROM lots WHERE lotnumber = 'A2'),600,'2015-08-04 00:00:00')
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Tanzania CVS'),(SELECT id FROM lots WHERE lotnumber = 'B2'),300,'2015-08-04 00:00:00')
  ;

  INSERT INTO stock_card_entries (stockcardid, lotonhandid, type, quantity)
  VALUES ((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Arusha RVS' AND l.lotnumber = 'A1'),'DEBIT',100)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Arusha RVS' AND l.lotnumber = 'A1'),'DEBIT',125)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Arusha RVS' AND l.lotnumber = 'A1'),'DEBIT',100)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Arusha RVS' AND l.lotnumber = 'A1'),'CREDIT',500)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Arusha RVS' AND l.lotnumber = 'A1'),'DEBIT',150)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Arusha RVS' AND l.lotnumber = 'A1'),'DEBIT',100)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Arusha RVS' AND l.lotnumber = 'A1'),'CREDIT',500)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Arusha RVS' AND l.lotnumber = 'A1'),'DEBIT',125)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Arusha RVS' AND l.lotnumber = 'A1'),'DEBIT',100)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Arusha RVS' AND l.lotnumber = 'A1'),'DEBIT',150)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Arusha RVS' AND l.lotnumber = 'A1'),'DEBIT',100)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Arusha RVS' AND l.lotnumber = 'B1'),'DEBIT',100)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Arusha RVS' AND l.lotnumber = 'B1'),'DEBIT',125)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Arusha RVS' AND l.lotnumber = 'B1'),'DEBIT',100)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Arusha RVS' AND l.lotnumber = 'B1'),'CREDIT',500)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Arusha RVS' AND l.lotnumber = 'B1'),'DEBIT',150)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Arusha RVS' AND l.lotnumber = 'B1'),'DEBIT',100)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Arusha RVS' AND l.lotnumber = 'B1'),'CREDIT',500)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Arusha RVS' AND l.lotnumber = 'B1'),'DEBIT',125)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Arusha RVS' AND l.lotnumber = 'B1'),'DEBIT',100)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Arusha RVS' AND l.lotnumber = 'B1'),'DEBIT',150)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Arusha RVS' AND l.lotnumber = 'B1'),'DEBIT',100)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Arusha RVS' AND l.lotnumber = 'A2'),'DEBIT',100)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Arusha RVS' AND l.lotnumber = 'A2'),'DEBIT',125)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Arusha RVS' AND l.lotnumber = 'A2'),'DEBIT',100)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Arusha RVS' AND l.lotnumber = 'A2'),'CREDIT',500)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Arusha RVS' AND l.lotnumber = 'A2'),'DEBIT',150)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Arusha RVS' AND l.lotnumber = 'A2'),'DEBIT',100)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Arusha RVS' AND l.lotnumber = 'A2'),'CREDIT',500)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Arusha RVS' AND l.lotnumber = 'A2'),'DEBIT',125)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Arusha RVS' AND l.lotnumber = 'A2'),'DEBIT',100)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Arusha RVS' AND l.lotnumber = 'A2'),'DEBIT',150)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Arusha RVS' AND l.lotnumber = 'A2'),'DEBIT',100)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Arusha RVS' AND l.lotnumber = 'B2'),'DEBIT',100)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Arusha RVS' AND l.lotnumber = 'B2'),'DEBIT',125)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Arusha RVS' AND l.lotnumber = 'B2'),'DEBIT',100)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Arusha RVS' AND l.lotnumber = 'B2'),'CREDIT',500)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Arusha RVS' AND l.lotnumber = 'B2'),'DEBIT',150)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Arusha RVS' AND l.lotnumber = 'B2'),'DEBIT',100)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Arusha RVS' AND l.lotnumber = 'B2'),'CREDIT',500)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Arusha RVS' AND l.lotnumber = 'B2'),'DEBIT',125)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Arusha RVS' AND l.lotnumber = 'B2'),'DEBIT',100)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Arusha RVS' AND l.lotnumber = 'B2'),'DEBIT',150)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Arusha RVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Arusha RVS' AND l.lotnumber = 'B2'),'DEBIT',100)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Karatu DVS' AND l.lotnumber = 'A1'),'DEBIT',10)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Karatu DVS' AND l.lotnumber = 'A1'),'DEBIT',12)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Karatu DVS' AND l.lotnumber = 'A1'),'DEBIT',10)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Karatu DVS' AND l.lotnumber = 'A1'),'CREDIT',50)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Karatu DVS' AND l.lotnumber = 'A1'),'DEBIT',15)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Karatu DVS' AND l.lotnumber = 'A1'),'DEBIT',10)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Karatu DVS' AND l.lotnumber = 'A1'),'CREDIT',50)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Karatu DVS' AND l.lotnumber = 'A1'),'DEBIT',12)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Karatu DVS' AND l.lotnumber = 'A1'),'DEBIT',10)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Karatu DVS' AND l.lotnumber = 'A1'),'DEBIT',15)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Karatu DVS' AND l.lotnumber = 'A1'),'DEBIT',10)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Karatu DVS' AND l.lotnumber = 'B1'),'DEBIT',10)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Karatu DVS' AND l.lotnumber = 'B1'),'DEBIT',12)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Karatu DVS' AND l.lotnumber = 'B1'),'DEBIT',10)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Karatu DVS' AND l.lotnumber = 'B1'),'CREDIT',50)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Karatu DVS' AND l.lotnumber = 'B1'),'DEBIT',15)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Karatu DVS' AND l.lotnumber = 'B1'),'DEBIT',10)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Karatu DVS' AND l.lotnumber = 'B1'),'CREDIT',50)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Karatu DVS' AND l.lotnumber = 'B1'),'DEBIT',12)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Karatu DVS' AND l.lotnumber = 'B1'),'DEBIT',10)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Karatu DVS' AND l.lotnumber = 'B1'),'DEBIT',15)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for BCG at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for BCG at Karatu DVS' AND l.lotnumber = 'B1'),'DEBIT',10)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Karatu DVS' AND l.lotnumber = 'A2'),'DEBIT',10)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Karatu DVS' AND l.lotnumber = 'A2'),'DEBIT',12)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Karatu DVS' AND l.lotnumber = 'A2'),'DEBIT',10)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Karatu DVS' AND l.lotnumber = 'A2'),'CREDIT',50)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Karatu DVS' AND l.lotnumber = 'A2'),'DEBIT',15)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Karatu DVS' AND l.lotnumber = 'A2'),'DEBIT',10)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Karatu DVS' AND l.lotnumber = 'A2'),'CREDIT',50)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Karatu DVS' AND l.lotnumber = 'A2'),'DEBIT',12)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Karatu DVS' AND l.lotnumber = 'A2'),'DEBIT',10)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Karatu DVS' AND l.lotnumber = 'A2'),'DEBIT',15)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Karatu DVS' AND l.lotnumber = 'A2'),'DEBIT',10)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Karatu DVS' AND l.lotnumber = 'B2'),'DEBIT',10)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Karatu DVS' AND l.lotnumber = 'B2'),'DEBIT',12)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Karatu DVS' AND l.lotnumber = 'B2'),'DEBIT',10)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Karatu DVS' AND l.lotnumber = 'B2'),'CREDIT',50)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Karatu DVS' AND l.lotnumber = 'B2'),'DEBIT',15)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Karatu DVS' AND l.lotnumber = 'B2'),'DEBIT',10)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Karatu DVS' AND l.lotnumber = 'B2'),'CREDIT',50)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Karatu DVS' AND l.lotnumber = 'B2'),'DEBIT',12)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Karatu DVS' AND l.lotnumber = 'B2'),'DEBIT',10)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Karatu DVS' AND l.lotnumber = 'B2'),'DEBIT',15)
    ,((SELECT id FROM stock_cards WHERE notes = 'Test stock card for OPV at Karatu DVS'),(SELECT loh.id FROM lots_on_hand loh JOIN stock_cards sc ON sc.id = loh.stockcardid JOIN lots l ON l.id = loh.lotid WHERE sc.notes = 'Test stock card for OPV at Karatu DVS' AND l.lotnumber = 'B2'),'DEBIT',10)
  ;

  INSERT INTO roles (name)
  VALUES ('Stock Viewer')
    ,('Stock Manager')
  ;

  INSERT INTO role_rights (roleid, rightname)
  VALUES ((SELECT id FROM roles WHERE name = 'Stock Manager'), 'MANAGE_STOCK')
    ,((SELECT id FROM roles WHERE name = 'Stock Manager'), 'VIEW_STOCK_ON_HAND')
    ,((SELECT id FROM roles WHERE name = 'Stock Viewer'), 'VIEW_STOCK_ON_HAND')
  ;

  INSERT INTO role_assignments (userid, roleid, programid, supervisorynodeid)
  VALUES ((SELECT id FROM users where username = 'vims-admin'),(SELECT id FROM roles WHERE name = 'Stock Manager'),(SELECT id FROM programs WHERE code = 'Vaccine'),NULL)
      ,((SELECT id FROM users where username = 'vims-admin'),(SELECT id FROM roles WHERE name = 'Stock Viewer'),(SELECT id FROM programs WHERE code = 'Vaccine'),(SELECT id FROM supervisory_nodes WHERE name = 'Tanzania CVS'))
      ,((SELECT id FROM users where username = 'vims-rivo'),(SELECT id FROM roles WHERE name = 'Stock Manager'),(SELECT id FROM programs WHERE code = 'Vaccine'),NULL)
      ,((SELECT id FROM users where username = 'vims-rivo'),(SELECT id FROM roles WHERE name = 'Stock Viewer'),(SELECT id FROM programs WHERE code = 'Vaccine'),(SELECT id FROM supervisory_nodes WHERE name = 'Arusha RVS'))
      ,((SELECT id FROM users where username = 'vims-divo'),(SELECT id FROM roles WHERE name = 'Stock Manager'),(SELECT id FROM programs WHERE code = 'Vaccine'),NULL)
      ,((SELECT id FROM users where username = 'vims-divo'),(SELECT id FROM roles WHERE name = 'Stock Manager'),(SELECT id FROM programs WHERE code = 'Vaccine'),(SELECT id FROM supervisory_nodes WHERE name = 'Karatu DVS'))
  ;

END;
$$

