apply plugin: 'jetty'


dependencies {
    compile 'org.testng:testng:6.1.1',
            'org.seleniumhq.selenium:selenium-java:2.25.0',
            'org.seleniumhq.selenium:selenium-firefox-driver:2.25.0',
            'net.sf.json-lib:json-lib:0.9',
            'postgresql:postgresql:9.0-801.jdbc4',
            project(':test-modules:test-core')


    testCompile 'org.springframework:spring-test:3.1.1.RELEASE',
            'org.testng:testng:6.1.1',
            'org.seleniumhq.selenium:selenium-java:2.25.0',
            'org.seleniumhq.selenium:selenium-firefox-driver:2.25.0 ',
            'net.sf.json-lib:json-lib:0.9',
            'postgresql:postgresql:9.0-801.jdbc4',
            project(':test-modules:test-core')
}

test {
    exclude '**/org/openlmis/service/*.*'
}

task buildOpenLmis(type: GradleBuild) {
    buildFile = '../../modules/openlmis-web/build.gradle'
    tasks = ['jettyRunWarDaemon']
}

task serviceTest(type: Test) {
    include '**/org/openlmis/service/*.*'
    useTestNG()
}

serviceTest.doFirst() {
    buildOpenLmis.execute()
}

