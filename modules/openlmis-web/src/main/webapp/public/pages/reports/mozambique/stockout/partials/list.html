<div>
    <div id="control-bar">

        <h3 class="report-title" openlmis-message="title.stock.out.report"></h3>

        <div ng-include="'/public/pages/reports/mozambique/product-report-selection.html'"></div>

        <div class="report-selection">
            <label class="labels" openlmis-message="label.filter.drugs"></label>
            <div ng-dropdown-multiselect=""
                 options="products" selected-model="multiProducts" extra-settings="multiSelectionSettings"
                 checkboxes="true" translation-texts="multiSelectionModifyTexts"></div>
        </div>

        <div class="report-selection">
            <input type="submit" class="btn btn-primary" ng-click="loadReport()"
                   openlmis-message="button.generateReport"/>
        </div>

        <div style="clear: both"></div>

    </div>

    <hr/>

    <div class="time-container">
        <div class="time-tag">
            <ul>
                <li ng-repeat="timeTag in timeTags">
                    <a ng-class="{'selected': timeTagSelected == timeTag}" ng-click=changePeriod(timeTag)
                       openlmis-message="label.last.{{timeTag}}" href=""></a>
                    <span>|</span>
                </li>
            </ul>
        </div>

        <div class="date-picker">
            <div class="form-cell">
                <label>
                    <span openlmis-message="label.start.date"></span>
                </label>

                <div class="form-field">
                    <input name="startTime" id="startTime" type="text"
                           ui-date="{maxDate: '{{reportParams.endTime | date: 'yyyy-MM-dd'}}', dateFormat: 'yy-mm-dd', changeYear: true}"
                           ui-date-format
                           ng-model="reportParams.startTime"
                           ng-click="checkDate()"/>
                </div>
            </div>

            <div> - </div>

            <div class="form-cell">
                <label>
                    <span openlmis-message="label.end.date"></span>
                </label>

                <div class="form-field">
                    <input name="endTime" id="endTime" type="text"
                           ui-date="{maxDate: todayDateString, dateFormat: 'yy-mm-dd', changeYear: true}"
                           ui-date-format
                           ng-model="reportParams.endTime"
                           ng-click="checkDate()"/>
                </div>
            </div>
        </div>
    </div>
    <hr/>

    <div id="report" ng-if="reportData">
        <h3 class="report-title" openlmis-message="subtitle.stock.out.report|reportParams.reportTitle"></h3>

        <table class="table table-condensed table-bordered table-striped">
            <tr class="gradient-header">
                <th ng-click="sortType = 'code'; sortReverse = !sortReverse" class="sortable sort-desc" openlmis-message="report.drug.code">
                    <span ng-show="sortType != 'code'" class="icon-sort"></span>
                    <span ng-show="sortType == 'code' && !sortReverse" class="icon-sort-up"></span>
                    <span ng-show="sortType == 'code' && sortReverse" class="icon-sort-down"></span></th>
                <th ng-click="sortType = 'name'; sortReverse = !sortReverse" class="sortable sort-desc" openlmis-message="report.drug.name">
                    <span ng-show="sortType != 'name'" class="icon-sort"></span>
                    <span ng-show="sortType == 'name' && !sortReverse" class="icon-sort-up"></span>
                    <span ng-show="sortType == 'name' && sortReverse" class="icon-sort-down"></span></th>
                <th ng-click="sortType = 'avg'; sortReverse = !sortReverse" class="sortable sort-desc" openlmis-message="report.stock.out.avg.duration">
                    <span ng-show="sortType != 'avg'" class="icon-sort"></span>
                    <span ng-show="sortType == 'avg' && !sortReverse" class="icon-sort-up"></span>
                    <span ng-show="sortType == 'avg' && sortReverse" class="icon-sort-down"></span></th>
                <th ng-click="sortType = 'occurrences'; sortReverse = !sortReverse" class="sortable sort-desc" openlmis-message="report.stock.out.occurrences">
                    <span ng-show="sortType != 'occurrences'" class="icon-sort"></span>
                    <span ng-show="sortType == 'occurrences' && !sortReverse" class="icon-sort-up"></span>
                    <span ng-show="sortType == 'occurrences' && sortReverse" class="icon-sort-down"></span></th>
                <th ng-click="sortType = 'total'; sortReverse = !sortReverse" class="sortable sort-desc" openlmis-message="report.stock.out.total">
                    <span ng-show="sortType != 'total'" class="icon-sort"></span>
                    <span ng-show="sortType == 'total' && !sortReverse" class="icon-sort-up"></span>
                    <span ng-show="sortType == 'total' && sortReverse" class="icon-sort-down"></span></th>
                <th openlmis-message="report.stock.out.details"></th>
            </tr>

            <tr ng-repeat="entry in reportData | orderBy:sortType:sortReverse">
                <td>{{entry.code}}</td>
                <td style="text-align: left">{{entry.name}}</td>
                <td>{{entry.avg}}</td>
                <td>{{entry.occurrences}}</td>
                <td>{{entry.total}}</td>
                <td><a openlmis-message="report.stock.out.view.details"></a></td>
            </tr>
        </table>
    </div>
    <label ng-show="reportData && reportData.length == 0">No Data</label>

</div>
