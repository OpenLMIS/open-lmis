<!--
  ~ This program was produced for the U.S. Agency for International Development. It was prepared by the USAID | DELIVER PROJECT, Task Order 4. It is part of a project which utilizes code originally licensed under the terms of the Mozilla Public License (MPL) v2 and therefore is licensed under MPL v2 or later.
  ~
  ~ This program is free software: you can redistribute it and/or modify it under the terms of the Mozilla Public License as published by the Mozilla Foundation, either version 2 of the License, or (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the Mozilla Public License for more details.
  ~
  ~ You should have received a copy of the Mozilla Public License along with this program. If not, see http://www.mozilla.org/MPL/
  -->
<div xmlns="http://www.w3.org/1999/html" tab-scroll>
<h2>{{title}}</h2>

<div class="alert alert-success" id="saveSuccessMsgDiv" ng-bind="message" ng-show="message"/>

<!-- Add Product -->
<form ng-submit="createProduct()" id="createProductForm" name="createProductForm"
      novalidate select2-blur>

<div>
<h3>Basic Information</h3>

<div class="row">

<fieldset class="span4">
<!-- Product code-->
<div class="form-cell">
    <label for="code">Code<span
            class="label-required"> *</span></label>

    <div class="form-field" style="width: 40%;">

        <input ng-model="product.code" name="code" id="code" type="text"
               maxlength="50"
               ng-required="true"/>
        <span class="field-error"
              ng-show="createProductForm.code.$error.required && showError"
              openlmis-message="missing.value">
        </span>
    </div>
</div>

<!-- Product Pack Size-->
<div class="form-cell">
    <label for="packSize">Pack Size<span
            class="label-required"> *</span></label>

    <div class="form-field" style="width: 40%;">
        <input ng-model="product.packSize" name="packSize" id="packSize" type="number"
               ng-required="true"/>
        <span class="field-error"
              ng-show="createProductForm.packSize.$error.required && showError"
              openlmis-message="missing.value">
        </span>
    </div>
</div>

<!-- product name-->
<div class="form-cell">
    <label for="primaryName">Product Name<span
            class="label-required"> *</span></label>

    <div class="form-field" style="width: 40%;">
        <input ng-model="product.primaryName" name="primaryName" id="primaryName" type="text"
               maxlength="150"
               ng-required="true"/>
        <span class="field-error"
              ng-show="createProductForm.primaryName.$error.required && showError"
              openlmis-message="missing.value">
        </span>
    </div>
</div>

<!-- Dispensing Units-->
<div class="form-cell">
    <label for="dispensingUnit">Dispensing Unit<span
            class="label-required"> *</span></label>

    <div class="form-field" style="width: 40%;">
        <input ng-model="product.dispensingUnit" name="dispensingUnit" id="dispensingUnit"
               type="text"
               maxlength="20"
               ng-required="true"/>
        <span class="field-error"
              ng-show="createProductForm.dispensingUnit.$error.required && showError"
              openlmis-message="missing.value">
        </span>

    </div>
</div>
</fieldset>
<fieldset class="span4">
<!-- product strength-->
<div class="form-cell">
    <label for="strength">Strength</label>
    <div class="form-field" style="width: 40%;">
        <input ng-model="product.strength" name="strength" id="strength" type="text"
               maxlength="50"/>
        <span class="field-error"
              ng-show="createProductForm.strength.$error.required && showError"
              openlmis-message="missing.value">
        </span>
    </div>
</div>

<!-- Dosage Units-->
<div class="form-cell">
    <label for="dosageUnit">Dosage Unit</label>

    <div class="form-field" style="width: 40%;">

        <select style="width:200px;" name="dosageUnit" id="dosageUnit" ng-model="product.dosageUnitId"
                ng-options="option.id as option.code for option in dosageUnits" ng-required="true">

        </select>
           <span class="field-error"
                 ng-show="createProductForm.dosageUnit.$error.required && showError"
                 openlmis-message="missing.value">
            </span>
    </div>
</div>

<!-- Product Form-->
<div class="form-cell">
    <label for="formid">Product Form</label>

    <div class="form-field" style="width: 40%;">

        <select style="width:200px;" name="formid" id="formid" ng-model="product.formId"
                ng-options="option.id as option.code for option in productForms" ng-required="true">

        </select>
       <span class="field-error"
             ng-show="createProductForm.formid.$error.required && showError"
             openlmis-message="missing.value">
        </span>
    </div>
</div>

<!-- Product Groups-->
<div class="form-cell">
    <label for="productGroupId">Product Group</label>

    <div class="form-field" style="width: 40%;">

        <select style="width:200px;" ng-model="product.productGroupId" id="productgroupid" name="productgroupid"
                ng-options="option.id as option.name for option in productGroups" ng-required="true">

        </select>
       <span class="field-error"
             ng-show="createProductForm.productgroupid.$error.required && showError"
             openlmis-message="missing.value">
        </span>
    </div>
</div>
</fieldset>
<fieldset class="span4">

    <!-- Type-->
    <div class="form-cell">
        <label for="type">Type</label>

        <div class="form-field" style="width: 40%;">
            <input ng-model="product.type" name="type" id="type" type="text"
                   maxlength="20"/>
        <span class="field-error"
              ng-show="createProductForm.type.$error.required && showError"
              openlmis-message="missing.value">
        </span>
        </div>
    </div>

    <!-- Doses Per Dispensing Units-->
    <div class="form-cell">
        <label for="dosesPerDispensingUnit">Doses Per Dispensing Unit<span
                class="label-required"> *</span></label>

        <div class="form-field" style="width: 40%;">
            <input ng-model="product.dosesPerDispensingUnit" name="dosesPerDispensingUnit" id="dosesPerDispensingUnit"
                   type="text"
                   maxlength="20"
                   ng-required="true"/>
            <span class="field-error"
                  ng-show="createProductForm.dosesPerDispensingUnit.$error.required && showError"
                  openlmis-message="missing.value">
            </span>

        </div>
    </div>

    <!-- Thresh hold-->
    <div class="form-cell">
        <label for="packRoundingThreshold">Threshold<span
                class="label-required"> *</span></label>

        <div class="form-field" style="width: 40%;">
            <input ng-model="product.packRoundingThreshold" name="packRoundingThreshold" id="packRoundingThreshold"
                   type="number"
                   ng-required="true"/>
        <span class="field-error"
              ng-show="createProductForm.packRoundingThreshold.$error.required && showError"
              openlmis-message="missing.value">
        </span>
        </div>
    </div>

    <!-- Product Full Supply-->
    <div class="form-cell">
        <div class="form-field">
            <table>
                <tr>
                    <td><input ng-model="product.fullSupply" type="checkbox"/>
                    </td>
                    <td>&nbsp;</td>
                    </td>
                    <td>Full Supply</td>
                </tr>
                <tr>
                    <td>
                        <input ng-model="product.tracer" type="checkbox" >
                    </td>
                    <td>&nbsp;</td>
                    </td>
                    <td>Tracer</td>
                </tr>
                <tr>
                    <td>
                        <input ng-model="product.active" checked="checked" type="checkbox">
                    </td>
                    <td>&nbsp;</td>
                    </td>
                    <td>Active</td>
                </tr>
                <tr>
                    <td>
                        <input ng-model="product.roundToZero" type="checkbox">
                    </td>
                    <td>&nbsp;</td>
                    </td>
                    <td>Round to Zero</td>
                </tr>


            </table>
        </div>
    </div>
</fieldset>
</div>

<!--Program Association-->
<div class="form-group">
    <h3>Program Association</h3>

    <table border="0">
        <tr>
            <th style="width:200px;text-align: left;">Program</th>
            <th style="width:50px"></th>
            <th>R&R Display Order</th>
            <th>Category</th>
            <th style="text-align: left; width:200px;">Price Per Pack</th>
            <th style="text-align:left;width:200px">Doses Per Month</th>
        </tr>
        <tr ng-repeat="pg in product.programProducts">
            <td>{{ pg.programName }}</td>
            <td><input type="checkbox" ng-model="pg.active"/></td>

            <td>

                <input type="number" ng-required="pg.active" ng-model="pg.displayOrder"/>
                <span ng-show="(pg.active && !pg.displayOrder)" class="label-required"><- required </span>
            </td>
            <td>

                <select style="width:200px;" ng-model="pg.productCategoryId"
                        ng-disabled="(!pg.active )"
                        ng-required="(categoryPerProgramProductIsRequired && pg.active)"
                        ng-options="option.id as option.name for option in productCategories">
                </select>
                <span ng-show="(pg.active && categoryPerProgramProductIsRequired && !pg.productCategoryId)"
                      class="label-required"><- required</span>
            </td>
            <td>
                <input ng-model="pg.currentPrice"
                       type="text"/>
            </td>
            <td>
                <input ng-model="pg.dosesPerMonth"
                       type="text"/>
            </td>
        </tr>
    </table>

</div>

<div form-toolbar id="action_buttons" class="action-buttons">
    <div class="form-cell button-row">
        <input type="submit" class="btn btn-primary save-button" openlmis-message="button.save"/>
        <a ng-click="cancelAddNewProduct()" class="btn btn-cancel cancel-button"><span
                openlmis-message="button.cancel"></span></a>
    </div>
    <div class="toolbar-error" id="saveErrorMsgDiv" ng-show="showError || error">{{ errorMessage }}</div>
</div>

</div>
</form>

</div>




