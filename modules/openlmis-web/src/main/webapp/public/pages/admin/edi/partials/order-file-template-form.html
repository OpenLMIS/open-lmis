<!--
~ Copyright Â© 2013 VillageReach.  All Rights Reserved.  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
~
~ If a copy of the MPL was not distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->


<div xmlns="http://www.w3.org/1999/html" tab-scroll>
  <h2 openlmis-message="label.order.file.format"></h2>

  <form ng-submit="saveOrderFileTemplate()" id="create-order-file-template" name="createOrderFileTemplate" novalidate>
    <div class="app-form" tab-scroll>
      <div class="clearfix form-inline row-fluid">
        <div class="span3">
          <label for="orderFilePrefix" openlmis-message="label.order.file.prefix"></label>&nbsp;

          <input ng-model="orderFileTemplate.configuration.orderFilePrefix" name="orderFilePrefix" id="orderFilePrefix"
                 class="input-small" type="text" maxlength="8"
                 ng-required="true"/>


        </div>
        <div class="span4 include-header-form">
          <input type="checkbox" id="includeHeadersCheckbox" ng-model="orderFileTemplate.configuration.headerInOrderFile"/>
          <label for="includeHeadersCheckbox" openlmis-message="label.column.include.headers"></label>
        </div>
      </div>
    </div>

    <hr/>

    <div id="orderColumns">
      <div class="list-header-container">
        <div class="row-fluid list-header">
          <div class="span1">
            <span class="first-column" openlmis-message="label.include"></span>
          </div>
          <div class="span3" openlmis-message="label.data.field"></div>
          <div class="span4">
            <div openlmis-message="label.column.header"></div>
          </div>

        </div>
      </div>

      <div class="rnr-template-columns">
        <ul ui-sortable ng-model="orderFileTemplate.orderFileColumns" id="sortable">
          <li ng-repeat="orderFileColumn in orderFileTemplate.orderFileColumns">
            <div class="drag-handle"></div>
            <div class="row-fluid list-row">
              <div>
                <div class="span1">
                  <span class="first-column checkbox-column">
                    <input id="includeCheckbox{{ $index }}" type="checkbox" ng-model="orderFileColumn.includeInOrderFile"/>
                  </span>
                </div>
                <div class="span3">
                  <span openlmis-message="orderFileColumn.dataFieldLabel"></span>
                </div>
                <div class="span4">
                  <input type="text" id="columnHeaderField{{ $index }}" ng-model="orderFileColumn.columnLabel" maxlength="50" ng-disabled="orderFileTemplate.configuration.headerInOrderFile == false"/>
                </div>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>

    <div form-toolbar id="action_buttons" class="action-buttons">
      <div class="form-cell button-row">
        <input type="submit" class="btn btn-primary save-button" openlmis-message="button.save"/>
        <a href="/public/pages/index.html" class="btn btn-cancel cancel-button" openlmis-message="button.cancel"></a>
      </div>
      <div class="toolbar-success" id="saveSuccessMsgDiv" openlmis-message="message" ng-show="message"></div>

    </div>

  </form>

</div>