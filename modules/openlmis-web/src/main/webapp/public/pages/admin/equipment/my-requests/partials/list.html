<!--
  ~ This program was produced for the U.S. Agency for International Development. It was prepared by the USAID | DELIVER PROJECT, Task Order 4. It is part of a project which utilizes code originally licensed under the terms of the Mozilla Public License (MPL) v2 and therefore is licensed under MPL v2 or later.
  ~
  ~ This program is free software: you can redistribute it and/or modify it under the terms of the Mozilla Public License as published by the Mozilla Foundation, either version 2 of the License, or (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the Mozilla Public License for more details.
  ~
  ~ You should have received a copy of the Mozilla Public License along with this program. If not, see http://www.mozilla.org/MPL/
  -->


<div>
  <h2>My Equipment Maintenance Requests</h2>

  <p>
    These are maintenance requests that have been received in the system. please register vendors response for each
    request.
  </p>

  <div>
    <table class="table table-bordered">
      <thead>
      <tr>
        <th>#</th>
        <th>Facility</th>
        <th>Equipment</th>
        <th>Request Date</th>
        <th>Reason</th>
        <th>Recommended Date</th>
        <th>Actions</th>
      </tr>
      </thead>
      <tbody>
      <tr ng-repeat="row in list">
        <td>{{$index + 1}}</td>
        <td>{{row.facilityName}}</td>
        <td>{{row.equipmentName}}</td>
        <td>{{row.requestedDateString}}</td>
        <td>{{row.reason}}</td>
        <td>{{row.recommendedDateString}}</td>
        <th><input type="button" class="btn btn-small" ng-click="respondToRequest(row)" value="Respond"/></th>
      </tr>
      </tbody>
    </table>
  </div>

  <div id="maintenanceRequestResponseDiv" modal="maintenanceRequestResponseModal"
       options="{'backdrop':'static', 'escape':false}">
    <div class="modal-header">
      <h3>
        <span>Register Response</span>
      </h3>
    </div>

    <div class="modal-body">
      <form name="maintenanceRequestResponseForm">
        <div>
          <div class="row-fluid">
            <div class="span6">
              <label for="responseCommentValue"><span>Comment</span></label>
            </div>
            <div class="span4">
              <textarea ng-required="true" type="text"
                        name="responseCommentValue" id="responseCommentValue"
                        ng-model="currentRequest.vendorComment"></textarea>
            </div>
          </div>
          <div class="row-fluid">
            <div class="span6">
              &nbsp;
            </div>
            <div class="span6">
              <input ng-required="true" type="checkbox"
                     name="responseResolutionValue" id="responseResolutionValue"
                     ng-model="currentRequest.resolved"/>
              Mark As Resolved
            </div>
          </div>
        </div>

      </form>
      <div class="alert alert-error" id="saveFailMessage" openlmis-message="error" ng-show="error">

      </div>
    </div>

    <div class="modal-footer">
      <input type="button" class="btn btn-primary save-button" value="Update"
             ng-click="saveResponse()"/>
      <input type="button"
             ng-click="closeModal();error=''"
             class="btn btn-cancel" openlmis-message="button.cancel"/>
    </div>

  </div>


</div>