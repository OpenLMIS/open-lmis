<!--
  ~ Copyright Â© 2013 VillageReach. All Rights Reserved. This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  ~
  ~ If a copy of the MPL was not distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.
  -->

<div xmlns="http://www.w3.org/1999/html" tab-scroll>
  <h2 openlmis-message="label.shipment.file.format"></h2>

  <form ng-submit="saveShipmentFileTemplate()" id="create-shipment-file-template" name="createShipmentFileFormat"
        novalidate>
    <div class="app-form" tab-scroll>
      <div class="clearfix form-inline row-fluid">
        <div class="span4 include-header-form">
          <input type="checkbox" id="includeHeadersCheckbox"
                 ng-model="shipmentFileTemplate.shipmentConfiguration.headerInFile"/>
          <label for="includeHeadersCheckbox" openlmis-message="label.column.include.headers"></label>
        </div>
      </div>
    </div>

    <hr/>

    <div class="row-fluid">
      <div class="span10">
        <div id="shipmentFileColumns">
          <div class="list-header-container">
            <div class="row-fluid list-header">
              <div class="span1">
                <span class="first-column" openlmis-message="label.include"></span>
              </div>
              <div class="span2" openlmis-message="label.data.field"></div>
              <div class="span2"></div>
              <div class="span4">
                <div openlmis-message="label.position"></div>
              </div>
            </div>
          </div>

          <div class="rnr-template-columns list-container">
            <div class="row-fluid list-row" ng-repeat="shipmentFileColumn in shipmentFileTemplate.shipmentFileColumns">
              <div class="span1">
                <span class="first-column checkbox-column">
                  <input id="includeCheckbox{{ $index }}" type="checkbox"
                         ng-model="shipmentFileColumn.include"
                         ng-disabled='shipmentFileColumn.mandatory'/>
                </span>
              </div>
              <div class="span2">
                <span openlmis-message="shipmentFileColumn.dataFieldLabel"></span>
              </div>
              <div class="span2">
                <div class="row-fluid" ng-show="shipmentFileColumn.dataFieldLabel == 'header.packed.date'">
                  <select class="span12" ui-select2 ng-model="shipmentFileColumn.datePattern"
                          ng-options="dateFormat for dateFormat in dateFormats">
                  </select>
                </div>
                <div class="row-fluid" ng-show="shipmentFileColumn.dataFieldLabel == 'header.shipped.date'">
                  <select class="span12" ui-select2 ng-model="shipmentFileColumn.datePattern"
                          ng-options="dateFormat for dateFormat in dateFormats">
                  </select>
                </div>
              </div>
              <div class="span1">
                <input type="text" ng-model="shipmentFileColumn.position" maxlength="3"
                       numeric-validator="positiveInteger"
                  class="right-justified"/>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div form-toolbar id="action_buttons" class="action-buttons">
      <div class="form-cell button-row">
        <input type="submit" class="btn btn-primary save-button" openlmis-message="button.save"/>
        <a href="#/configure-edi-file" class="btn btn-cancel cancel-button" openlmis-message="button.cancel"></a>
      </div>
      <div class="toolbar-success" id="saveSuccessMsgDiv" openlmis-message="message" ng-show="message"></div>
      <div class="toolbar-error" id="saveErrorMsgDiv" openlmis-message="error" ng-show="error"></div>

    </div>

  </form>
</div>
