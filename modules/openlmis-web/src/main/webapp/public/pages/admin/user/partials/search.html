<!--
  ~ This program is part of the OpenLMIS logistics management information system platform software.
  ~ Copyright © 2013 VillageReach
  ~
  ~ This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.
  ~  
  ~ This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for more details.
  ~ You should have received a copy of the GNU Affero General Public License along with this program.  If not, see http://www.gnu.org/licenses.  For additional information contact info@OpenLMIS.org. 
  -->

<div xmlns="http://www.w3.org/1999/html">
  <h2><span openlmis-message="label.search.user"></span>
    <a href="#/create-user" class="pull-right btn btn-primary"><span id="user-add-new"
                                                                     openlmis-message="button.add.new"></span></a>
  </h2>

  <div class="alert alert-success" id="saveSuccessMsgDiv" ng-show="userId">
    <span ng-bind="message"></span>.&nbsp;<a id="viewHereLink" href="" ng-click="edit(userId)"
                                             openlmis-message="search.viewHere"></a>
  </div>

  <div id="searchControl" class="row-fluid">
    <div class="span5 search-in-category">
      <div class="input-append input-prepend">
        <input id='searchUser' type="text" class="span5" ng-model="query" maxlength="50"
               ng-keydown="triggerSearch($event)"/>
        <button class="btn">
          <i id='searchIcon' class="icon-search" ng-click="loadUsers(1)"></i>
        </button>
      </div>
    </div>
  </div>

  <table name="searchResultTable" class="table table-striped table-bordered search-list" ng-show="showResults">
    <thead>
    <tr class="gradient-header resultCountHeader">
      <th colspan="5">
          <span ng-switch on="totalItems">
          <h3 id="noResultMessage" ng-switch-when="0" openlmis-message="msg.no.matches|searchedQuery"></h3>
          <h3 id="oneResultMessage" ng-switch-when="1" openlmis-message="msg.one.match|searchedQuery"></h3>
          <h3 id="nResultsMessage" ng-switch-default
              openlmis-message="msg.many.matches|totalItems|searchedQuery"></h3>
            </span>
        <a id="closeButton" class="close-btn" href="" ng-click="clearSearch()" tabindex="-1"></a>
      </th>
    </tr>
    <tr id="nullResultCounter" class="gradient-header" ng-show="userList.length">
      <th id="nameHeader" openlmis-message="header.user.name"></th>
      <th id="userNameHeader" openlmis-message="header.user.userName"></th>
      <th id="emailHeader" openlmis-message="header.user.email"></th>
      <th id="verifiedHeader" openlmis-message="header.user.verified"></th>
      <th id="activeHeader" openlmis-message="header.user.active"></th>
    </tr>
    </thead>
    <tbody id="userList">
    <tr id="searchResult" ng-repeat="user in userList">
      <td>
        <a id="name{{$index}}" href="" ng-click="edit(user.id)">{{user.firstName}} {{user.lastName}}</a>
      </td>
      <td id="userName{{$index}}" ng-bind="user.userName"></td>
      <td id="email{{$index}}" ng-bind="user.email"></td>
      <td id="verified{{$index}}" ng-show="user.verified != undefined" class="center-justified">
        <i id="verifiedUser{{$index}}"
           ng-class="{'icon-ok': user.verified}"></i>
      </td>
      <td id="active{{$index}}" ng-show="user.active != undefined" class="center-justified">
        <i id="activeUser{{$index}}"
           ng-class="{'icon-ok': user.active}"></i>
      </td>
    </tr>
    </tbody>
  </table>

  <pagination total-items="totalItems" page="currentPage" max-size="5" items-per-page="pagination.limit"
              direction-links="false" ng-show="userList.length" class="pagination-sm"></pagination>

  <!--<div class="search-list" ng-show="query.length > 2">-->
    <!--<div ng-switch on="resultCount">-->
      <!--<h3 ng-switch-when="0" openlmis-message="msg.no.matches|query"></h3>-->

      <!--<h3 ng-switch-when="1" openlmis-message="msg.one.match|query"></h3>-->

      <!--<h3 ng-switch-default openlmis-message="msg.many.matches|resultCount|query"></h3>-->
    <!--</div>-->
    <!--<a class="close-btn" href="" ng-click="clearSearch()" tabindex="-1"></a>-->
    <!--<ul id="userList" class="user-list" ng-model="filteredUsers">-->
      <!--<li ng-repeat="user in filteredUsers" ng-class="{'user-disabled': !user.active}">-->
        <!--<a id="user{{$index}}" href="" ng-click="editUser(user.id)">-->
          <!--<span class="user-name">{{user.firstName}} {{user.lastName}}</span>-->
          <!--<span class="user-username">({{user.userName}})</span> --->
          <!--{{user.email}}-->
        <!--</a>-->

        <!--<div class="user-actions">-->
          <!--<a id="editUser{{$index}}" href="" class="btn btn-primary btn-small" openlmis-message="button.edit"-->
             <!--ng-click="editUser(user.id)"></a>-->
          <!--<a id="resetPassword{{$index}}" href="" class="btn btn-primary btn-small"-->
             <!--ng-class="{'disabled': !user.active}" openlmis-message="button.reset.password"-->
             <!--ng-click="changePassword(user)"></a>-->
        <!--</div>-->
      <!--</li>-->
    <!--</ul>-->
  <!--</div>-->

  <!--<div id="changePassword" modal="changePasswordModal" options="{'backdrop':'static', 'escape':false}">-->
    <!--<form name="passwordForm">-->
      <!--<div class="modal-header">-->
        <!--<h3>-->
          <!--<span openlmis-message="message.reset.password"></span>&nbsp;<span ng-bind="user.firstName"></span>&nbsp;-->
          <!--<span ng-bind="user.lastName"></span>-->
        <!--</h3>-->
      <!--</div>-->

      <!--<div class="modal-body">-->
        <!--<div ng-hide="message">-->
          <!--<form name='ResetPasswordForm'>-->
            <!--<div class="row-fluid">-->
              <!--<div class="span12">-->
                <!--<label openlmis-message="placeholder.new.password"></label>-->
                <!--<input type="password" id="password1" ng-trim="false" oncopy="return false;"-->
                       <!--maxlength="16"-->
                       <!--ng-model="password1"/>-->
              <!--</div>-->
            <!--</div>-->
            <!--<div class="row-fluid">-->
              <!--<div class="span12">-->
                <!--<label openlmis-message="placeholder.reenter.password"></label>-->
                <!--<input type="password" id="password2" ng-trim="false" oncopy="return false;"-->
                       <!--maxlength="16"-->
                       <!--ng-model="password2"/>-->
              <!--</div>-->
            <!--</div>-->

            <!--<div class="alert alert-error" ng-bind="error" ng-show="error"></div>-->
          <!--</form>-->
        <!--</div>-->


        <!--<div class="alert alert-success" ng-bind="message" ng-show="message"></div>-->
      <!--</div>-->

      <!--<div class="modal-footer">-->
        <!--<input id="resetPasswordDone" type="button" class="btn btn-primary" openlmis-message="button.done"-->
               <!--ng-click="updatePassword()"-->
               <!--ng-hide="message"/>-->
        <!--<input id="resetPasswordCancel" type="button" class="btn btn-cancel" openlmis-message="button.cancel"-->
               <!--ng-click="resetPasswordModal()"-->
               <!--ng-hide="message"/>-->
        <!--<input id="resetPasswordOk" type="button" class="btn btn-primary" openlmis-message="button.ok"-->
               <!--ng-click="resetPasswordModal()"-->
               <!--ng-show="message"/>-->
      <!--</div>-->

    <!--</form>-->
  <!--</div>-->

</div>